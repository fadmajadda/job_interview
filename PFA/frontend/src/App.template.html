<div id="app">
    <div class="container">
      <header>
        <h1>Générateur de Questions d'Entretien Technique</h1>
        <p class="subtitle">Obtenez des questions personnalisées basées sur l'offre d'emploi</p>
      </header>
      
      <main>
        <section class="job-description-section">
          <h2><i class="fas fa-file-alt"></i> Offre d'emploi</h2>
          <textarea 
            v-model="jobDescription" 
            placeholder="Copiez ou collez le texte de l'offre d'emploi ici..."
            rows="10"
          ></textarea>
          <div class="form-group">
            <label for="question-count">Nombre de questions à générer :</label>
            <input 
              type="number" 
              id="question-count" 
              v-model.number="questionCount"
              min="5" 
              max="30"
              placeholder="Entre 5 et 30"
            >
          </div>
          <div class="form-group">
            <label for="question-format">Format des questions :</label>
            <select 
              id="question-format" 
              v-model="questionFormat"
              class="format-selector"
            >
              <option value="qcm">QCM (choix multiples)</option>
              <option value="qa">Questions/Réponses (ouvertes)</option>
            </select>
          </div>
          <div class="actions">
            <button @click="generateQuestions" :disabled="isLoading">
              <span v-if="isLoading" class="loading-spinner"></span>
              {{ isLoading ? 'Génération en cours...' : 'Générer le quiz' }}
            </button>
          </div>
          <div v-if="techData" class="skills-container">
            <h3 class="skills-title">Compétences clés détectées</h3>
            
            <div class="skills-grid">
                   <!-- Langages -->
    <div v-if="techData.languages.length" class="skill-category">
        <div class="category-header">
          <i class="fas fa-code category-icon"></i>
          <h4 class="category-title">Langages</h4>
        </div>
        <div class="skills-list">
          <div v-for="(language, index) in techData.languages" :key="'lang'+index" class="skill-item">
            {{ language }}
          </div>
        </div>
      </div>
  
      <!-- Frameworks -->
      <div v-if="techData.frameworks.length" class="skill-category">
        <div class="category-header">
          <i class="fas fa-cubes category-icon"></i>
          <h4 class="category-title">Frameworks</h4>
        </div>
        <div class="skills-list">
          <div v-for="(framework, index) in techData.frameworks" :key="'fw'+index" class="skill-item">
            {{ framework }}
          </div>
        </div>
      </div>
              <!-- Outils -->
              <div v-if="techData.tools.length" class="skill-category">
                <div class="category-header">
                  <i class="fas fa-tools category-icon"></i>
                  <h4 class="category-title">Outils</h4>
                </div>
                <div class="skills-list">
                  <div v-for="(tool, index) in techData.tools" :key="'tool'+index" class="skill-item">
                    {{ tool }}
                  </div>
                </div>
              </div>
          
              <!-- Concepts -->
              <div v-if="techData.concepts.length" class="skill-category">
                <div class="category-header">
                  <i class="fas fa-lightbulb category-icon"></i>
                  <h4 class="category-title">Concepts</h4>
                </div>
                <div class="skills-list">
                  <div v-for="(concept, index) in techData.concepts" :key="'concept'+index" class="skill-item">
                    {{ concept }}
                  </div>
                </div>
              </div>
          
              <!-- Niveau -->
              <div class="skill-category">
                <div class="category-header">
                  <i class="fas fa-chart-line category-icon"></i>
                  <h4 class="category-title">Niveau</h4>
                </div>
                <div class="level-badge" :class="'level-' + techData.level">
                  {{ techData.level }}
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Remplacez la section question par : -->
<section v-if="questions.length > 0" class="question-section">
  <h2>
    <i class="fas fa-question-circle"></i> 
    Question {{ currentQuestionIndex + 1 }}/{{ questions.length }}
  </h2>
  
  <div class="progress-bar">
    <div class="progress" :style="{ width: progress + '%' }"></div>
  </div>
  
  <article class="question-card">
    <h3>{{ currentQuestion.question }}</h3>
    
    <div v-if="questionFormat === 'qcm'">
      <form @submit.prevent="checkAnswer">
        <fieldset>
          <legend class="sr-only">Options de réponse</legend>
          <div 
            v-for="(option, index) in currentQuestion.options" 
            :key="index" 
            class="option"
            @click="selectedOption = index"
          >
            <input 
              type="radio" 
              :id="'option' + index" 
              :value="index" 
              v-model="selectedOption"
              :disabled="answerChecked"
            >
            <label 
              :for="'option' + index" 
              :class="{
                'correct': answerChecked && option.correct,
                'incorrect': answerChecked && !option.correct && selectedOption === index
              }"
            >
              {{ option.text }}
            </label>
          </div>
        </fieldset>
        
        <div class="form-actions">
          <button 
            v-if="!answerChecked" 
            type="submit" 
            :disabled="selectedOption === null"
            class="primary"
          >
            Valider la réponse
          </button>
        </div>
      </form>
    </div>
    <!-- Format questions/réponses -->
    <div v-else>
      <div v-if="!answerChecked" class="answer-input-section">
        <textarea
          v-model="userAnswer"
          placeholder="Saisissez votre réponse ici..."
          rows="4"
          class="answer-input"
        ></textarea>
        <button 
        @click="validateAnswer" 
        class="primary" 
        :disabled="!userAnswer.trim() || isCheckingAnswer"
      >
        <span v-if="isCheckingAnswer" class="loading-spinner"></span>
        {{ isCheckingAnswer ? 'Validation en cours...' : 'Valider ma réponse' }}
      </button>
      </div>
    <div v-if="answerChecked" class="feedback">
      <div v-if="isAnswerCorrect" class="correct-feedback">
        <i class="fas fa-check-circle"></i> 
        <span>Réponse correcte ({{ Math.round(answerScore * 100) }}%)</span>
      </div>
      <div v-else class="incorrect-feedback">
        <i class="fas fa-times-circle"></i> 
        <span>Réponse partiellement correcte ({{ Math.round(answerScore * 100) }}%)</span>
      </div>
      
      <div class="feedback-explanation">
        <p>{{ answerFeedback }}</p>
      </div>
      
      <div class="expected-answer">
        <h4>Réponse optimale :</h4>
        <p>{{ currentQuestion.answer }}</p>
      </div>
    </div>
    </div>
    <div v-if="answerChecked" class="explanation">
      <p><strong>Explication :</strong> {{ currentQuestion.explication }}</p>
      <div class="navigation-buttons">
        <button 
          @click="prevQuestion" 
          type="button" 
          class="secondary"
          :disabled="isFirstQuestion"
        >
          <i class="fas fa-arrow-left"></i> Précédente
        </button>
        
        <button 
          @click="nextQuestion" 
          type="button" 
          class="primary"
          :disabled="isLastQuestion"
        >
          Suivante <i class="fas fa-arrow-right"></i>
        </button>
        
        <button @click="resetQuiz" type="button" class="secondary">
          <i class="fas fa-redo"></i> Nouveau quiz
        </button>
      </div>
    </div>
  </article>
</section>
        
        <div v-if="error" class="error">
          <i class="fas fa-exclamation-circle"></i> {{ error }}
        </div>
      </main>
    </div>
  </div>